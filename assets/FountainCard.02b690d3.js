import{Q as k}from"./QInnerLoading.b1f69d49.js";import{Q as F}from"./QImg.a4aaed75.js";import{d as g,r as h,a3 as w,l as Q,m as i,x as p,j as s,F as q,y as B,t as c,aT as b,n as x,p as a,s as n,bb as I,C as L,_ as $,z as D,aU as U,A as j,G as z,B as f,U as A,aP as S}from"./index.4f390c6a.js";import{U as E}from"./cloudDB.d318324a.js";const N={class:"q-px-md"},O={class:"absolute-bottom"},R={class:"text-subtitle2"},V={class:"q-pt-none"},M={key:0,class:"q-pt-xl text-orange text-h6 text-center"},G=g({__name:"FountainsList",props:{id:String},emits:["selected"],setup(y,{emit:t}){const r=h(""),d=t,u=w({list:[]}),v=h(!0);Q(async()=>{var l,o;const _=E.getInstance();try{const e=await _.request("databaseCRUD/get",{query:{collection:"pcf-fountains"}});console.log("FountainsList res:",e),v.value=!1,(l=e==null?void 0:e.data)!=null&&l.length?u.list=u.list.concat(e.data):!e.success&&((o=e.error)==null?void 0:o.message)&&(/resource exhausted/.test(e.error.message)?r.value="DB resource exhausted.":r.value=e.error.message)}catch(e){console.error("cloudObj FountainsList:",e)}});function C(_){const l=u.list[_];d("selected",l)}return(_,l)=>(i(),p("div",N,[s(k,{showing:v.value,label:"\u52A0\u8F7D\u55B7\u6CC9\u6570\u636E ...","label-class":"text-teal","label-style":"font-size: 1.1em"},null,8,["showing"]),(i(!0),p(q,null,B(u.list,(o,e)=>(i(),x(L,{class:"q-my-lg my-card",key:e,onClick:I(m=>C(e),["stop"])},{default:a(()=>{var m;return[s(F,{src:(m=o.poster)==null?void 0:m.url},{default:a(()=>[n("div",O,[n("div",R,c(o.name),1),n("div",V,c(o.address),1)])]),_:2},1032,["src"])]}),_:2},1032,["onClick"]))),128)),r.value.length?(i(),p("div",M,c(r.value),1)):b("",!0)]))}});var Y=$(G,[["__scopeId","data-v-416843fe"]]);const P=["src"],T={class:"text-caption"},H={class:"text-caption text-weight-thin"},Z=g({__name:"FountainCard",props:{data:{}},setup(y){return(t,r)=>t.data?D((i(),x(j,{key:0,clickable:"",dense:"",class:U(["q-py-xs",t.$q.dark.isActive?"bg-blue-10":"bg-light-blue-2"])},{default:a(()=>[s(f,{avatar:""},{default:a(()=>[s(z,{size:"xl",rounded:""},{default:a(()=>{var d;return[n("img",{src:(d=t.data.poster)==null?void 0:d.url},null,8,P)]}),_:1})]),_:1}),s(f,{class:"text-center"},{default:a(()=>[n("div",T,c(t.data.name),1),n("div",H,c(t.data.address),1)]),_:1}),s(f,{side:""},{default:a(()=>[s(A,{name:"keyboard_arrow_down"})]),_:1})]),_:1},8,["class"])),[[S]]):b("",!0)}});export{Y as F,Z as _};
