import{Q as V}from"./QResizeObserver.cb7e3544.js";import{K as B,i as W,W as z,r as h,c as r,w,X as K,Y as U,h as f,g as T,Z as F,$ as _,L as E,a0 as I,a1 as N,a2 as P,a3 as x,a as j,a4 as M}from"./index.4f390c6a.js";import{Q as X}from"./QScrollObserver.ad751985.js";var A=B({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:p,emit:v}){const{proxy:{$q:l}}=T(),n=W(F,z);if(n===z)return console.error("QHeader needs to be child of QLayout"),z;const o=h(parseInt(t.heightHint,10)),u=h(!0),b=r(()=>t.reveal===!0||n.view.value.indexOf("H")>-1||l.platform.is.ios&&n.isContainer.value===!0),g=r(()=>{if(t.modelValue!==!0)return 0;if(b.value===!0)return u.value===!0?o.value:0;const e=o.value-n.scroll.value.position;return e>0?e:0}),s=r(()=>t.modelValue!==!0||b.value===!0&&u.value!==!0),q=r(()=>t.modelValue===!0&&s.value===!0&&t.reveal===!0),L=r(()=>"q-header q-layout__section--marginal "+(b.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),Q=r(()=>{const e=n.rows.value.top,d={};return e[0]==="l"&&n.left.space===!0&&(d[l.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),e[2]==="r"&&n.right.space===!0&&(d[l.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),d});function c(e,d){n.update("header",e,d)}function m(e,d){e.value!==d&&(e.value=d)}function C({height:e}){m(o,e),c("size",e)}function H(e){q.value===!0&&m(u,!0),v("focusin",e)}w(()=>t.modelValue,e=>{c("space",e),m(u,!0),n.animate()}),w(g,e=>{c("offset",e)}),w(()=>t.reveal,e=>{e===!1&&m(u,t.modelValue)}),w(u,e=>{n.animate(),v("reveal",e)}),w(n.scroll,e=>{t.reveal===!0&&m(u,e.direction==="up"||e.position<=t.revealOffset||e.position-e.inflectionPoint<100)});const S={};return n.instances.header=S,t.modelValue===!0&&c("size",o.value),c("space",t.modelValue),c("offset",g.value),K(()=>{n.instances.header===S&&(n.instances.header=void 0,c("size",0),c("offset",0),c("space",!1))}),()=>{const e=U(p.default,[]);return t.elevated===!0&&e.push(f("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(f(V,{debounce:0,onResize:C})),f("header",{class:L.value,style:Q.value,onFocusin:H},e)}}}),D=B({name:"QPageContainer",setup(t,{slots:p}){const{proxy:{$q:v}}=T(),l=W(F,z);if(l===z)return console.error("QPageContainer needs to be child of QLayout"),z;_(I,!0);const n=r(()=>{const o={};return l.header.space===!0&&(o.paddingTop=`${l.header.size}px`),l.right.space===!0&&(o[`padding${v.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(o.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(o[`padding${v.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),o});return()=>f("div",{class:"q-page-container",style:n.value},E(p.default))}}),G=B({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(t,{slots:p,emit:v}){const{proxy:{$q:l}}=T(),n=h(null),o=h(l.screen.height),u=h(t.container===!0?0:l.screen.width),b=h({position:0,direction:"down",inflectionPoint:0}),g=h(0),s=h(N.value===!0?0:P()),q=r(()=>"q-layout q-layout--"+(t.container===!0?"containerized":"standard")),L=r(()=>t.container===!1?{minHeight:l.screen.height+"px"}:null),Q=r(()=>s.value!==0?{[l.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),c=r(()=>s.value!==0?{[l.lang.rtl===!0?"right":"left"]:0,[l.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function m(a){if(t.container===!0||document.qScrollPrevented!==!0){const i={position:a.position.top,direction:a.direction,directionChanged:a.directionChanged,inflectionPoint:a.inflectionPoint.top,delta:a.delta.top};b.value=i,t.onScroll!==void 0&&v("scroll",i)}}function C(a){const{height:i,width:y}=a;let $=!1;o.value!==i&&($=!0,o.value=i,t.onScrollHeight!==void 0&&v("scrollHeight",i),S()),u.value!==y&&($=!0,u.value=y),$===!0&&t.onResize!==void 0&&v("resize",a)}function H({height:a}){g.value!==a&&(g.value=a,S())}function S(){if(t.container===!0){const a=o.value>g.value?P():0;s.value!==a&&(s.value=a)}}let e=null;const d={instances:{},view:r(()=>t.view),isContainer:r(()=>t.container),rootRef:n,height:o,containerHeight:g,scrollbarWidth:s,totalWidth:r(()=>u.value+s.value),rows:r(()=>{const a=t.view.toLowerCase().split(" ");return{top:a[0].split(""),middle:a[1].split(""),bottom:a[2].split("")}}),header:x({size:0,offset:0,space:!1}),right:x({size:300,offset:0,space:!1}),footer:x({size:0,offset:0,space:!1}),left:x({size:300,offset:0,space:!1}),scroll:b,animate(){e!==null?clearTimeout(e):document.body.classList.add("q-body--layout-animate"),e=setTimeout(()=>{e=null,document.body.classList.remove("q-body--layout-animate")},155)},update(a,i,y){d[a][i]=y}};if(_(F,d),P()>0){let y=function(){a=null,i.classList.remove("hide-scrollbar")},$=function(){if(a===null){if(i.scrollHeight>l.screen.height)return;i.classList.add("hide-scrollbar")}else clearTimeout(a);a=setTimeout(y,300)},R=function(O){a!==null&&O==="remove"&&(clearTimeout(a),y()),window[`${O}EventListener`]("resize",$)},a=null;const i=document.body;w(()=>t.container!==!0?"add":"remove",R),t.container!==!0&&R("add"),j(()=>{R("remove")})}return()=>{const a=M(p.default,[f(X,{onScroll:m}),f(V,{onResize:C})]),i=f("div",{class:q.value,style:L.value,ref:t.container===!0?void 0:n,tabindex:-1},a);return t.container===!0?f("div",{class:"q-layout-container overflow-hidden",ref:n},[f(V,{onResize:H}),f("div",{class:"absolute-full",style:Q.value},[f("div",{class:"scroll",style:c.value},[i])])]):i}}});export{G as Q,A as a,D as b};
