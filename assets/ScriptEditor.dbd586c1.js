import{c as O,K as Fe,i as We,h as E,Q as j,aG as Ge,bu as De,U as K,a4 as $e,g as Oe,aq as Xe,ar as Ze,r as _,R as el,av as ll,$ as al,L as tl,d as nl,l as ol,w as ve,m as h,n as I,p as q,z as Se,aO as Ce,s as V,j as p,aT as A,x as $,F as M,B as le,y as ae,bc as we,A as ke,aV as fe,H as Y,v as me,bb as il}from"./index.4f390c6a.js";import{Q as ul}from"./QFile.0b5cf431.js";import{Q as sl}from"./QSelect.8ad877e3.js";import{Q as rl}from"./QForm.c09e6959.js";import{Q as cl}from"./QPage.e32daf6c.js";import{u as dl}from"./use-quasar.4e14d354.js";import{u as vl}from"./SearchKey.a606d0cd.js";import{_ as qe}from"./CollectionSelect.2d35001e.js";import{_ as fl}from"./UpdatedDate.47641b74.js";import{_ as ml}from"./GroupSelect.989d4c58.js";import{U as pl,c as gl}from"./cloudDB.d318324a.js";import{a as bl}from"./index.4024674e.js";import{m as yl}from"./constant.a3c7e21e.js";import{u as hl}from"./vue-i18n.runtime.b0371a81.js";import"./QChip.17ac3977.js";import"./format.6396bb17.js";import"./QItemLabel.95b24a48.js";import"./QMenu.75c03351.js";import"./selection.1482bdb7.js";import"./rtl.0738a96b.js";import"./index.d9f23821.js";import"./date.865a2574.js";import"./axios.ea5872bc.js";const _l=["top","right","bottom","left"],Ne={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:i=>_l.includes(i)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Ve(i,g){return{formClass:O(()=>`q-fab--form-${i.square===!0?"square":"rounded"}`),stacked:O(()=>i.externalLabel===!1&&["top","bottom"].includes(i.labelPosition)),labelProps:O(()=>{if(i.externalLabel===!0){const x=i.hideLabel===null?g.value===!1:i.hideLabel;return{action:"push",data:{class:[i.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${i.labelPosition}`+(x===!0?" q-fab__label--external-hidden":"")],style:i.labelStyle}}}return{action:["left","top"].includes(i.labelPosition)?"unshift":"push",data:{class:[i.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${i.labelPosition}`+(i.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:i.labelStyle}}})}}const Ee={start:"self-end",center:"self-center",end:"self-start"},Sl=Object.keys(Ee);var Cl=Fe({name:"QFabAction",props:{...Ne,icon:{type:String,default:""},anchor:{type:String,validator:i=>Sl.includes(i)},to:[String,Object],replace:Boolean},emits:["click"],setup(i,{slots:g,emit:x}){const m=We(De,()=>({showing:{value:!0},onChildClick:Ge})),{formClass:N,labelProps:F}=Ve(i,m.showing),C=O(()=>{const b=Ee[i.anchor];return N.value+(b!==void 0?` ${b}`:"")}),w=O(()=>i.disable===!0||m.showing.value!==!0);function v(b){m.onChildClick(b),x("click",b)}function R(){const b=[];return g.icon!==void 0?b.push(g.icon()):i.icon!==""&&b.push(E(K,{name:i.icon})),(i.label!==""||g.label!==void 0)&&b[F.value.action](E("div",F.value.data,g.label!==void 0?g.label():[i.label])),$e(g.default,b)}const D=Oe();return Object.assign(D.proxy,{click:v}),()=>E(j,{class:C.value,...i,noWrap:!0,stack:i.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:w.value,onClick:v},R)}});const wl=["up","right","down","left"],kl=["left","center","right"];var ql=Fe({name:"QFab",props:{...Ne,...Xe,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:i=>wl.includes(i)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:i=>kl.includes(i)}},emits:Ze,setup(i,{slots:g}){const x=_(null),m=_(i.modelValue===!0),N=el(),{proxy:{$q:F}}=Oe(),{formClass:C,labelProps:w}=Ve(i,m),v=O(()=>i.persistent!==!0),{hide:R,toggle:D}=ll({showing:m,hideOnRouteChange:v}),b=O(()=>({opened:m.value})),B=O(()=>`q-fab z-fab row inline justify-center q-fab--align-${i.verticalActionsAlign} ${C.value}`+(m.value===!0?" q-fab--opened":" q-fab--closed")),S=O(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${i.direction} q-fab__actions--${m.value===!0?"opened":"closed"}`),Q=O(()=>{const f={id:N,role:"menu"};return m.value!==!0&&(f["aria-hidden"]="true"),f}),L=O(()=>`q-fab__icon-holder  q-fab__icon-holder--${m.value===!0?"opened":"closed"}`);function r(f,y){const U=g[f],W=`q-fab__${f} absolute-full`;return U===void 0?E(K,{class:W,name:i[y]||F.iconSet.fab[y]}):E("div",{class:W},U(b.value))}function z(){const f=[];return i.hideIcon!==!0&&f.push(E("div",{class:L.value},[r("icon","icon"),r("active-icon","activeIcon")])),(i.label!==""||g.label!==void 0)&&f[w.value.action](E("div",w.value.data,g.label!==void 0?g.label(b.value):[i.label])),$e(g.tooltip,f)}return al(De,{showing:m,onChildClick(f){R(f),x.value!==null&&x.value.$el.focus()}}),()=>E("div",{class:B.value},[E(j,{ref:x,class:C.value,...i,noWrap:!0,stack:i.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":m.value===!0?"true":"false","aria-haspopup":"true","aria-controls":N,onClick:D},z),E("div",{class:S.value,...Q.value},tl(g.default))])}});const Fl={class:"q-mb-md rounded-borders",style:{border:"1px lightgrey solid"}},Dl=V("div",null,"state",-1),$l={class:"q-gutter-x-lg q-gutter-y-sm"},Ol={class:"q-mb-md rounded-borders",style:{border:"1px lightgrey solid"}},Nl=V("div",null,"status",-1),Vl={class:"q-gutter-x-lg q-gutter-y-sm"},El={key:2,class:"q-mb-md row col justify-between"},xl={class:"q-mt-md row col justify-between"},Bl={class:"q-mb-xs row col justify-between"},Ul={key:0,class:"q-mb-md row col justify-between"},Jl={key:1,class:"row col justify-between"},Pl={key:3,class:"q-mb-md"},Il={class:"q-my-lg row justify-between"},sa=nl({__name:"ScriptEditor",setup(i){const g=dl(),{t:x}=hl(),m=vl(),N=_(!0),F=_(0),C=_("Submit"),w=_(-1);let v=-1,R=-1;const D=_([]),b=_([!0,!0]),B=_(),S=_(),Q=_(),L=_(null);let r,z="1~";const f=_(""),y=_([]);let U=!1;const W={name:"",delay:0,state:3,status:1,access:1,timeline:[]},te={start:"",end:"",lyrics:"",clip:[""]},a=_(JSON.parse(JSON.stringify(W))),s=_(),ne=_("http://2.16.1.77:3002"),T=_(!0),X=_("Event"),J=_(!1);let P="ScriptData",oe=[],ie=!0,G=!1;const xe=[{label:"",icon:"toggle_off",color:"primary",textColor:"white",onClick:()=>{T.value=!0,++F.value>=oe.length&&(F.value=0),X.value=oe[F.value]}},{label:"",icon:"stop_circle",color:"primary",textColor:"white",onClick:()=>{console.log("Clicked on Stop"),T.value=!0,ue("stop")}},{label:"",icon:"data_array",color:"primary",textColor:"white",onClick:()=>{console.log("Clicked on Range"),T.value=!0,ie=!1,S.value&&Q.value&&Pe()}},{label:"",icon:"play_circle",color:"primary",textColor:"white",onClick:()=>{var l;if(S.value&&Q.value){T.value=!0,ie=!0,console.log("Clicked on Play");let e=(l=s.value)==null?void 0:l.start;ue("play",pe(e))}}}],H=pl.getInstance();ol(async()=>{m.getEnable||m.toggleEnable(),m.getShow&&m.toggleShow(),oe=x("script.mode").split(",")}),ve(()=>L.value,async l=>{if(console.log("watch scriptFile:",l),l&&a.value){const e=await l.arrayBuffer(),u=new TextDecoder("utf-8").decode(new Uint8Array(e)),n=JSON.parse(u);n.timeline&&r&&(r.timeline=n.timeline,he(),P="ScriptData",U=!1,C.value="Submit",await be())}}),ve(()=>s.value,async(l,e)=>{if(e&&Ue(R)&&G&&(U=!0,await re("",R)),l&&l.start.length&&l.end.length){const t=`${l.start} ~ ${l.end}`;y.value[v]=t,f.value=t}},{deep:!0}),ve(()=>f.value,l=>{if(l!=null&&l.length){const e=y.value.findIndex(u=>u.includes(l)),t=a.value.timeline;t&&(t==null?void 0:t.length)>=0&&e>=0&&e!==v&&(s.value=t[e],R=v,v=e,G=!1,w.value=0)}},{immediate:!0});function Be(){L.value=null}function Ue(l){const e=a.value.timeline;if(l>=0&&e&&(e==null?void 0:e.length)>v){const t=e[l];if(t&&(r==null?void 0:r.timeline)){let u=!1;const n=r==null?void 0:r.timeline[l];if(n.start===t.start&&n.end===t.end&&n.lyrics===n.lyrics){for(const c of r.timeline[l].clip)if(!t.clip.includes(c)){u=!0;break}}return u}}return!0}function Je(){N.value=!0,J.value=!1,m.getShow||m.toggleShow()}function pe(l){const e=JSON.parse(JSON.stringify(S.value));if(e.media=JSON.parse(JSON.stringify(Q.value)),e.script=JSON.parse(JSON.stringify(a.value)),e.script.scope=l,ie){const t=JSON.parse(JSON.stringify(s.value)),u=t.clip.length-1;for(let n=u;n>=0;n--)(F.value===1&&n!==w.value||F.value!==1&&D.value.includes(n+v*100))&&t.clip.splice(n,1);e.script.timeline=[t]}return e.autoSwitch={to:b.value[0],back:b.value[1]},e}function Pe(){g.dialog({title:"Scope",message:"1~3.4 , 3~ , ~15.2 , 62.2.3",prompt:{model:z,type:"text"},cancel:!0,persistent:!0}).onOk(l=>{z=l,/[\d\~\s\.]+/.test(z)&&ue("play",pe(z))}).onCancel(()=>{}).onDismiss(()=>{})}function ue(l,e){gl(`/playback/${l}`,{host:ne.value,body:e}).then(t=>{console.log(`Server ${l} res:`,t),l==="play"&&(G=!0)}).catch(t=>{console.warn(`Server ${l} Error:`,t)})}function Ie(){P="EventData",v>=0&&y.value.length>0&&s.value&&(y.value[v]=f.value+`${s.value.lyrics?` ------ ${s.value.lyrics}`:""}`,J.value=!0),m.getShow&&m.toggleShow()}async function ge(){P="ScriptData",J.value=!1,m.getShow&&m.toggleShow(),G&&U&&await re()}function Ae(){}function Z(){P="EventData",J.value=!0,m.getShow&&m.toggleShow()}function se(){var l,e;if(console.log("onEventBlur eventName.value:",f.value),f.value.length<1&&((l=s.value)==null?void 0:l.start.length)&&((e=s.value)==null?void 0:e.end.length)){const t=`${s.value.start} ~ ${s.value.end}`;y.value.findIndex(n=>n===t)>=0?g.notify({color:"warning",textColor:"red",icon:"warning",position:"center",message:`Event ${t} is duplicated!`}):f.value=t}}function Qe(l){if(F.value===2){const e=l+v*100,t=D.value.indexOf(e);t>-1?D.value.splice(t,1):D.value.push(e)}}function je(l){P="ClipData",J.value=!0,w.value=l,m.getShow&&m.toggleShow()}function Re(){}function ee(l,e){g.notify({type:l,message:e,icon:"cloud_done",position:"top",timeout:5e3})}async function be(){var c,o;console.log("updateScriptData formData:",a.value);const l=a.value._id?{_id:a.value._id}:{program_id:(c=S.value)==null?void 0:c._id,name:(o=S.value)==null?void 0:o.name},e=Date.now(),t={...a.value,_id:void 0,updated_at:e};C.value==="Update"&&(t.timeline=void 0),t.created_at||(t.created_at=e),console.log("updateScriptData body:",t);let u="positive",n=" Successfully.";try{const d=await H.request("databaseCRUD/update",{query:{collection:"pcf-scripts",condition:JSON.stringify(l)},body:t});console.log("updateScriptData res:",d),d.affectedDocs>0||d.id?(a.value.created_at||(a.value.created_at=t.created_at),a.value.updated_at=t.updated_at,C.value==="Submit"?(d.id&&(a.value._id=d.id,r=JSON.parse(JSON.stringify(a.value)),n=`${d.affectedDocs} Doc Added`+n),C.value="Update"):n=`${d.affectedDocs} Doc Updated`+n):(u="negative",n="No Doc Updated."),ee(u,n)}catch(d){n=typeof d=="string"?d:JSON.stringify(d),ee("negative",n)}}async function ye(l){var u,n;let e="update";(!r||!(r!=null&&r.timeline)||(r==null?void 0:r.timeline.length)&&l>=r.timeline.length)&&(e="add");const t=a.value._id?{_id:a.value._id}:{program_id:(u=S.value)==null?void 0:u._id,name:(n=S.value)==null?void 0:n.name};if(a.value._id&&s.value&&r){let c="positive",o=" Updated Successfully.";try{const d=await H.request("databaseCRUD/arrayUpdate",{query:{collection:"pcf-scripts",condition:JSON.stringify(t),field:"timeline",arrayIndex:l,method:e},body:JSON.stringify(s.value)});console.log("updateEventData res:",d),d.affectedDocs>0?(U=!1,G=!1,r!=null&&r.timeline&&(r.timeline[l]=JSON.parse(JSON.stringify(s.value))),o=`Event ${y.value[l]}`+o):(c="negative",o="No Doc Updated."),ee(c,o)}catch(d){o=typeof d=="string"?d:JSON.stringify(d),ee("negative",o)}}}async function Le(){var l,e,t,u,n,c,o;if(a.value._id&&((l=S.value)==null?void 0:l._id)&&v>=0&&a.value.timeline){const d={start:(e=s.value)==null?void 0:e.start,end:(t=s.value)==null?void 0:t.end};console.log("onDelete body:",d);const k=await H.request("databaseCRUD/arrayUpdate",{query:{collection:"pcf-scripts",condition:JSON.stringify({_id:a.value._id}),field:"timeline",arrayIndex:v,method:"remove"},body:d});if(console.log("onDelete Event res:",k),k.affectedDocs===1&&k.updated===1){(u=a.value.timeline)==null||u.splice(v,1),(n=r==null?void 0:r.timeline)==null||n.splice(v,1),y.value.splice(v,1);for(const de in(c=s.value)==null?void 0:c.clip){const Ke=parseInt(de)+v*100,_e=D.value.indexOf(Ke);_e>-1&&D.value.splice(_e,1)}if(((o=a.value.timeline)==null?void 0:o.length)===0)a.value.timeline.push(JSON.parse(JSON.stringify(te))),v=-1,y.value=[""],f.value="";else{v>y.value.length-1&&(v=y.value.length-1);const de=v;v=-1,f.value=y.value[de]}}}}async function re(l,e){let t=`${C.value} Script: ${a.value.name} ?`;const u=[{label:"Cancel",color:"white",handler:()=>{}}],n={label:"Yes",color:"yellow",handler:async()=>{await be()}};if(J.value&&U){t=` Event: ${f.value} ?`,l?t=l+t:t=C.value+t;const c=e||v;n.handler=async()=>{await ye(c)}}u.push(n),g.notify({type:"positive",icon:"cloud_done",position:"center",timeout:0,message:t,actions:u})}function Me(){console.log("onRestore scriptData:",r),r&&g.notify({type:"positive",icon:"cloud_done",position:"center",timeout:0,message:"\u66F4\u65B0\u6570\u636E\u5230\u4E91\u7AEF\u5417\uFF1F",caption:"\u6570\u636E\u5DF2\u7ECF\u88AB\u4FEE\u6539\uFF0C\u8BF7\u53CA\u65F6\u4E0A\u4F20\u3002",actions:[{label:"Cancel",color:"white",handler:()=>{}},{label:"Yes",color:"yellow",handler:()=>{}}]})}function ce(){a.value=JSON.parse(JSON.stringify(W)),r=void 0,y.value=[],f.value="",s.value=JSON.parse(JSON.stringify(te)),C.value="Submit"}function ze(){const l=[{label:"Cancel",color:"white",handler:()=>{}}],e={label:"Yes",color:"yellow",handler:()=>{var t,u;((u=(t=S.value)==null?void 0:t._id)==null?void 0:u.length)&&a.value&&ce()}};P==="EventData"?e.handler=()=>{var t,u;((u=(t=S.value)==null?void 0:t._id)==null?void 0:u.length)&&a.value.timeline&&(s.value=JSON.parse(JSON.stringify(te)),s.value&&a.value.timeline.push(s.value),v=a.value.timeline.length-1,y.value.push(""),f.value="")}:P==="ClipData"&&(e.handler=()=>{var t,u,n,c;((u=(t=S.value)==null?void 0:t._id)==null?void 0:u.length)&&a.value&&(w.value<0?(n=s.value)==null||n.clip.push(""):(c=s.value)==null||c.clip.splice(++w.value,0,""))}),l.push(e),g.notify({message:`Add a new ${X.value}?`,color:"primary",position:"center",icon:"add_circle",timeout:0,actions:l})}function Te(){const l=[{label:"Cancel",color:"white",handler:()=>{}}];let e=`Delete ${a.value.name} ?`;const t={label:"Yes",color:"yellow",handler:async()=>{var u,n;if(((n=(u=S.value)==null?void 0:u._id)==null?void 0:n.length)&&a.value._id){const c=await H.request("databaseCRUD/delete",{query:{collection:"pcf-scripts",condition:JSON.stringify({_id:a.value._id})}});console.log("onDelete Script res:",c),ce()}}};P==="EventData"?(e=`Delete Event: ${f.value} ?`,t.handler=async()=>{await Le()}):P==="ClipData"&&(e=`Delete Clip ${w.value+1} of Event ${f.value} ?`,t.handler=async()=>{var u,n,c,o;((n=(u=S.value)==null?void 0:u._id)==null?void 0:n.length)&&a.value&&w.value>=0&&((c=s.value)==null?void 0:c.clip)&&(s.value.clip.length===1?s.value.clip[0]="":(o=s.value)==null||o.clip.splice(w.value,1),w.value>s.value.clip.length-1&&(w.value=s.value.clip.length-1),U=!0,await ye(v))}),l.push(t),console.log("onDelete actions:",l),g.notify({type:"negative",position:"center",timeout:0,message:e,actions:l})}function He(l){console.log("onFountainPick data:",l),l&&l._id!==B.value&&(B.value=l._id,N.value=!1)}function he(l){var e;if(f.value="",a.value=JSON.parse(JSON.stringify(r)),l!=null&&l.length&&(a.value._id=l),a.value.program_id||(a.value.program_id=(e=S.value)==null?void 0:e._id),a.value.timeline||(a.value.timeline=[]),a.value.delay||(a.value.delay=3e3),a.value.state||(a.value.state=3),a.value.status||(a.value.status=1),a.value.access||(a.value.access=1),a.value.timeline){y.value=[];for(const t of a.value.timeline)y.value.push(`${t.start} ~ ${t.end} ------ ${t.lyrics}`);f.value=y.value[0],C.value="Update"}}async function Ye(l){var e,t,u,n;if(console.log("onProgramPick data:",l),l&&l.name!==a.value.name){S.value=l;const c=await H.request("databaseCRUD/get",{query:{collection:"pcf-media",condition:JSON.stringify({_id:l.media_id})}});if(console.log("onProgramPick programs result:",c),(e=c.data)!=null&&e.length){Q.value=c.data[0];let o=!0;if((u=(t=Q.value)==null?void 0:t.speed)!=null&&u.length){const k=Q.value.speed[0];console.log("onProgramPick media speed:",k),k.tempo&&k.time_signature&&k.start&&k.end&&(o=!1)}o&&g.notify({type:"warning",position:"center",timeout:5e3,message:`${l.name} Speed info is incomplete.`});const d=await H.request("databaseCRUD/get",{query:{collection:"pcf-scripts",condition:JSON.stringify({fountain_id:B.value,name:l.name})}});if(console.log("onProgramPick scripts res:",d),(n=d.data)!=null&&n.length){r=d.data[0],he();return}r=void 0,a.value._id=void 0,a.value.fountain_id=l._id,a.value.program_id=S.value._id,a.value.created_at&&(a.value.created_at=void 0),a.value.updated_at&&(a.value.updated_at=void 0),C.value="Submit"}else g.notify({type:"negative",position:"center",timeout:5e3,message:`${l.name} has no media information. Can not build a script.`})}}return(l,e)=>(h(),I(cl,{padding:"",class:"q-mx-sm"},{default:q(()=>{var t,u;return[Se(V("div",null,[p(qe,{enable_search:N.value,onSelected:He,onClick:Je},null,8,["enable_search"]),B.value?(h(),I(qe,{key:0,collection:"pcf-programs",fountain_id:B.value,enable_search:!N.value,onSelected:Ye,onClick:e[0]||(e[0]=n=>N.value=!1)},null,8,["fountain_id","enable_search"])):A("",!0)],512),[[Ce,!J.value]]),B.value&&((t=S.value)==null?void 0:t._id)?(h(),$(M,{key:0},[a.value.created_at&&a.value.updated_at?(h(),I(fl,{key:0,class:"q-my-md",created_at:a.value.created_at,updated_at:a.value.updated_at},null,8,["created_at","updated_at"])):A("",!0),J.value?Se((h(),$("div",El,[p(fe,{class:"col-6 q-pr-sm",label:`\u5F00\u64AD\u5207\u5C4F ${b.value[0]?"ON":"OFF"}`,modelValue:b.value[0],"onUpdate:modelValue":e[3]||(e[3]=n=>b.value[0]=n)},null,8,["label","modelValue"]),p(fe,{class:"col-6 q-pl-sm",label:`\u64AD\u5B8C\u8FD4\u56DE ${b.value[1]?"ON":"OFF"}`,modelValue:b.value[1],"onUpdate:modelValue":e[4]||(e[4]=n=>b.value[1]=n)},null,8,["label","modelValue"])],512)),[[Ce,(u=a.value.timeline)==null?void 0:u.length]]):(h(),$(M,{key:1},[V("div",Fl,[p(ke,null,{default:q(()=>[p(le,{class:"q-mr-lg",avatar:""},{default:q(()=>[Dl]),_:1}),p(le,{class:""},{default:q(()=>[V("div",$l,[(h(!0),$(M,null,ae(l.$t("state.script").split(","),(n,c)=>(h(),I(we,{key:c,modelValue:a.value.state,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.state=o),val:c,label:n,dense:""},null,8,["modelValue","val","label"]))),128))])]),_:1})]),_:1})]),V("div",Ol,[p(ke,null,{default:q(()=>[p(le,{class:"q-mr-lg",avatar:""},{default:q(()=>[Nl]),_:1}),p(le,{class:""},{default:q(()=>[V("div",Vl,[(h(!0),$(M,null,ae(l.$t("status.script").split(","),(n,c)=>(h(),I(we,{key:c,modelValue:a.value.status,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.status=o),val:c,label:n,dense:""},null,8,["modelValue","val","label"]))),128))])]),_:1})]),_:1})])],64)),V("div",xl,[p(Y,{class:"col-6 q-pr-sm",modelValue:ne.value,"onUpdate:modelValue":e[5]||(e[5]=n=>ne.value=n),label:"player host",outlined:"",clearable:"",dense:"","lazy-rules":"",rules:[n=>n.length>0||"http://127.0.0.1:3002"]},null,8,["modelValue","rules"]),p(ul,{class:"col-6 q-pl-sm",dense:"",outlined:"",modelValue:L.value,"onUpdate:modelValue":e[6]||(e[6]=n=>L.value=n),label:"load json file",accept:".json"},{append:q(()=>[L.value?(h(),I(K,{key:0,name:me(yl),onClick:il(Be,["stop","prevent"]),class:"cursor-pointer",color:"grey-5"},null,8,["name"])):(h(),I(j,{key:1,round:"",dense:"",flat:"",icon:"folder_open"}))]),_:1},8,["modelValue"])]),p(rl,{class:"",onSubmit:e[14]||(e[14]=n=>re()),onReset:ce},{default:q(()=>{var n,c;return[V("div",Bl,[p(fe,{class:"col-6 q-pr-sm q-pb-md",modelValue:a.value.access,"onUpdate:modelValue":e[7]||(e[7]=o=>a.value.access=o),color:"positive",label:`${a.value.access?"\u79C1\u6709 (\u4EC5\u4F5C\u8005\u53EF\u89C1)":"\u516C\u5F00 (\u5168\u7F51\u53EF\u89C1)"}`,"false-value":1,"true-value":0,onClick:ge},null,8,["modelValue","label"]),p(Y,{class:"col-6 q-pl-sm",outlined:"",modelValue:a.value.delay,"onUpdate:modelValue":e[8]||(e[8]=o=>a.value.delay=o),modelModifiers:{number:!0},type:"number",label:"delay",hint:"",dense:"","lazy-rules":"",onFocus:ge,onBlur:Ae,rules:[o=>o===void 0||o>0||"Please type something"]},null,8,["modelValue","rules"])]),(n=a.value.timeline)!=null&&n.length?(h(),$("div",Ul,[p(ml,{class:"col-6 q-pr-sm",fountain_id:B.value,onClick:Z},null,8,["fountain_id"]),p(sl,{class:"col-6 q-pl-sm",outlined:"",modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=o=>f.value=o),options:y.value,dense:"","options-dense":!1,"hide-dropdown-icon":"",label:"events","stack-label":"",onClick:Ie},{append:q(()=>[p(K,{name:me(bl)},null,8,["name"])]),_:1},8,["modelValue","options"])])):A("",!0),s.value?(h(),$("div",Jl,[p(Y,{class:"col-6 q-pr-sm",outlined:"",modelValue:s.value.start,"onUpdate:modelValue":e[10]||(e[10]=o=>s.value.start=o),label:"start",hint:"",dense:"","lazy-rules":"",onFocus:Z,onBlur:se,rules:[o=>o.length>=0&&(/^[1-9]\d*/.test(o)||/^[1-9]\d*\.[1-4]/.test(o)||/^[1-9]\d*\.[1-4]\.[1-4]/.test(o))||"\u5C0F\u8282\u53F7\u8BED\u6CD5\uFF1A1 , 1.2 , 1.2.3"]},null,8,["modelValue","rules"]),p(Y,{class:"col-6 q-pl-sm",outlined:"",modelValue:s.value.end,"onUpdate:modelValue":e[11]||(e[11]=o=>s.value.end=o),label:"end",hint:"",dense:"","lazy-rules":"",onFocus:Z,onBlur:se,rules:[o=>o.length>=0&&(/^[1-9]\d*/.test(o)||/^[1-9]\d*\.[1-4]/.test(o)||/^[1-9]\d*\.[1-4]\.[1-4]/.test(o))||"\u5C0F\u8282\u53F7\u8BED\u6CD5\uFF1A1 , 1.2 , 1.2.3"]},null,8,["modelValue","rules"])])):A("",!0),s.value?(h(),I(Y,{key:2,outlined:"",modelValue:s.value.lyrics,"onUpdate:modelValue":e[12]||(e[12]=o=>s.value.lyrics=o),label:"lyrics",hint:"",dense:"","lazy-rules":"",onFocus:Z,onBlur:se,rules:[o=>o.length>=0||"Please type something"]},null,8,["modelValue","rules"])):A("",!0),J.value&&((c=a.value.timeline)==null?void 0:c.length)?(h(),$("div",Pl,[p(ql,{modelValue:T.value,"onUpdate:modelValue":e[13]||(e[13]=o=>T.value=o),label:X.value,"vertical-actions-align":"left",color:"purple",icon:"keyboard_arrow_right",direction:"right"},{default:q(()=>[(h(),$(M,null,ae(xe,o=>p(Cl,{key:o.label,color:o.color,"text-color":o.textColor,label:o.label,"label-position":"left",padding:"4px",onClick:o.onClick},{icon:q(()=>[p(K,{name:o.icon,size:"38px"},null,8,["name"])]),_:2},1032,["color","text-color","label","onClick"])),64))]),_:1},8,["modelValue","label"])])):A("",!0),s.value?(h(!0),$(M,{key:4},ae(s.value.clip,(o,d)=>(h(),I(Y,{key:d,outlined:"",modelValue:s.value.clip[d],"onUpdate:modelValue":k=>s.value.clip[d]=k,label:"",hint:"",dense:"","lazy-rules":"",onFocus:k=>je(d),onBlur:Re,onClick:k=>Qe(d),rules:[k=>k.length>=0||"\u9700\u7B26\u5408\u55B7\u6CC9\u6C34\u79C0\u811A\u672C\u8BED\u6CD5"]},{append:q(()=>[p(K,{name:d==w.value&&F.value==1?"mic":D.value.includes(d+me(v)*100)?"mic_off":"",color:"purple"},null,8,["name"])]),_:2},1032,["modelValue","onUpdate:modelValue","onFocus","onClick","rules"]))),128)):A("",!0),V("div",Il,[C.value=="Update"&&X.value!="Script"?(h(),$(M,{key:0},[p(j,{dense:"",outline:"",color:"negative",icon:"add",round:"",onClick:ze}),p(j,{dense:"",outline:"",color:"negative",icon:"remove",round:"",onClick:Te}),p(j,{class:"",dense:"","no-caps":"",unelevated:"",label:"",color:"negative",icon:"undo",outline:"",round:"",onClick:Me})],64)):A("",!0),p(j,{class:"q-px-sm",dense:"","no-caps":"",unelevated:"",label:"Reset",type:"reset",color:"negative",icon:"restart_alt",outline:"",rounded:""}),p(j,{class:"q-px-sm",dense:"",outline:"","no-caps":"",unelevated:"",label:C.value,type:"submit",color:"primary",icon:"cloud_upload",rounded:""},null,8,["label"])])]}),_:1})],64)):A("",!0)]}),_:1}))}});export{sa as default};
